(this.webpackJsonpgitspace=this.webpackJsonpgitspace||[]).push([[0],{220:function(e,t,a){e.exports=a(365)},225:function(e,t,a){},226:function(e,t,a){},365:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(200),i=a.n(s),o=(a(225),a(34)),c=a(35),l=a(37),u=a(36),h=a(38),m=(a(226),a(227),a(425)),d=a(132),p=a.n(d),f=a(201),g=a(93),b=a(202),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).LabelText=function(e){var t=e.bars;if(0===t.length)return r.a.createElement("g",null);var n=a.getAllBars(t),s={fontSize:a.isOnSmallScreen()?"0.5em":"1em",fontFamily:"'Slabo 27px', serif"},i=n.map((function(e,t){e.key,e.x;var i=e.y,o=e.width,c=e.height;return r.a.createElement("text",{textAnchor:"middle",x:o+50,y:i+c/2.1,style:s,key:t},a.formatSize(n[t].data.value))}));return r.a.createElement("g",null,i)},a.state={labelPosition:null,width:0,height:0},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(g.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"getAllBars",value:function(e){var t=this.props.data.length-e.length,a=this.props.data.slice(0,t),n=e[0],r=[],s=e[0].height,i=e.length>=2?e[0].y-e[1].y:64;return a.reverse(),a.forEach((function(e){r.push({key:e.repoName,data:{id:"size",value:e.size,index:20,indexValue:e.repoName,data:{repoName:e.repoName,size:e.size}},x:0,y:n.y+i,width:1,height:s,color:"#e8c1a0"}),n=r[r.length-1]})),r.reverse(),r.concat(e)}},{key:"formatSize",value:function(e){return e<512?"".concat(e," KiB"):e<1048576?"".concat(Math.round(100*(e/1024+Number.EPSILON))/100," MiB"):"".concat(Math.round(100*(e/1048576+Number.EPSILON))/100," GiB")}},{key:"isOnSmallScreen",value:function(){return this.state.width<600}},{key:"getChartMargin",value:function(){return{top:10,right:120,bottom:200,left:this.isOnSmallScreen()?100:200}}},{key:"getChartDimension",value:function(){var e=this.isOnSmallScreen()?30:70,t=10*e;return{height:Math.max(t,this.props.repos.length*e),width:this.state.width}}},{key:"getTheme",value:function(){var e=this.isOnSmallScreen()?"0.5em":"1em";return{axis:{tickColor:"#eee",ticks:{text:{fontSize:e,fontFamily:"PT Sans, serif"}},legend:{text:{fontSize:e,fontFamily:"PT Sans, serif",fill:"#165f77"}}}}}},{key:"render",value:function(){return r.a.createElement("div",{className:"wrap-chart"},r.a.createElement("div",{style:this.getChartDimension(),className:"bar-chart"},r.a.createElement(b.a,{data:this.props.data,keys:["size"],indexBy:"repoName",margin:this.getChartMargin(),padding:.1,layout:"horizontal",layers:["grid","axes","bars",this.LabelText,"markers","legends"],colors:{scheme:"nivo"},colorBy:"index",borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,enableLabel:!1,axisLeft:{tickRotation:this.isOnSmallScreen()?-60:0},axisBottom:{tickSize:10,tickPadding:5,tickRotation:this.isOnSmallScreen()?-50:0,legend:"MiB",legendPosition:"middle",legendOffset:70,format:function(e){return Math.round(e/1024+Number.EPSILON)}},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15,theme:this.getTheme(),tooltipFormat:function(e){return e+" KiB"}})))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleUsernameChange=function(e){a.setState({username:e.target.value})},a.initPageState=function(){a.responseData=[],a.fetchPage=1,a.fetchMore=!0,a.invalidUser=!1,a.noRepos=!1,a.unknownError=!1,a.success=!1},a.handleSubmit=function(e){a.setState({loading:!0,invalidUser:!1,noRepos:!1,unknownError:!1,sizeMessage:!1}),e.preventDefault(),a.fetchRepos().then((function(){0!==a.responseData.length?a.formatResponseData():a.setState({success:!1,sizeMessage:!1,invalidUser:a.invalidUser,unknownError:a.unknownError,noRepos:a.noRepos}),a.initPageState(),a.setState({loading:!1})}))},a.state={username:"",renderChart:!0,responseData:[],chartData:null,repos:null,loading:!1,success:!1,sizeMessage:!1,fetchPage:1,fetchMore:!0,invalidUser:!1,noRepos:!1,unknownError:!1,totalSize:0},a.initPageState(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"fetchRepos",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetchMore){e.next=2;break}return e.abrupt("return");case 2:return t="https://api.github.com/users/".concat(this.state.username,"/repos?per_page=100"),a="".concat(t,"&page=").concat(this.fetchPage),e.next=6,fetch(a);case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,404!==n.status){e.next=13;break}return this.invalidUser=!0,e.abrupt("return");case 13:if(200===n.status){e.next=18;break}return this.unknownError=!0,this.loading=!1,this.success=!1,e.abrupt("return");case 18:if(0!==r.length){e.next=24;break}return this.fetchMore=!1,this.loading=!1,this.success=!1,0===this.responseData.length&&(this.noRepos=!0),e.abrupt("return");case 24:return this.responseData=this.responseData.concat(r),this.fetchPage=this.fetchPage+1,e.next=28,this.fetchRepos();case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatResponseData",value:function(){var e=[],t=[],a=0;this.responseData.forEach((function(n){t.push(n.name),a+=n.size;var r=n.size;e.push({repoName:n.name,size:r})})),e.sort((function(e,t){return e.size-t.size})),this.setState({chartData:e,repos:t,totalSize:Math.round(100*(a/1048576+Number.EPSILON))/100,success:!0,sizeMessage:!0,invalidUser:!1,unknownError:!1,noRepos:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"username-input-form"},r.a.createElement("input",{type:"text",className:"username-input",placeholder:"Github Username",value:this.state.username,onChange:this.handleUsernameChange})),this.state.loading?r.a.createElement("div",{className:"spinner-border",role:"status"}):null,this.state.invalidUser?r.a.createElement("div",{className:"alert alert-warning message",role:"alert"},"You sure that's a Github username?"):null,this.state.noRepos?r.a.createElement("div",{className:"alert alert-warning message",role:"alert"},"This person doesn't seems to have any repositories, what are you trying to see the space for?"):null,this.state.unknownError?r.a.createElement("div",{className:"alert alert-danger message",role:"alert"},"Something went wrong!"):null,this.state.sizeMessage?r.a.createElement("div",{className:"alert alert-info message"},"Total space occupied: ",this.state.totalSize," GiB"):null,this.state.success?r.a.createElement(v,{data:this.state.chartData,repos:this.state.repos}):null)}}]),t}(n.Component),y=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Source code at ",r.a.createElement("a",{className:"footer-text",href:"https://github.com/aktech/gitspace"},"Github")," \u2022 Made by ",r.a.createElement("a",{className:"footer-text",href:"https://iamit.in/"},"Amit")))}}]),t}(n.Component);m.a({dsn:"https://f624cc79b0aa4acc97959177183f0d11@sentry.io/4400890"});var S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"site-title"},"Gitspace"),r.a.createElement("h2",{className:"desc"},"Know the space occupied by your public repositories."),r.a.createElement(k,null),r.a.createElement(y,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[220,1,2]]]);
//# sourceMappingURL=main.cb4786d6.chunk.js.map