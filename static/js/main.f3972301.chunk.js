(this.webpackJsonpgitspace=this.webpackJsonpgitspace||[]).push([[0],{206:function(e,t,a){e.exports=a(351)},211:function(e,t,a){},212:function(e,t,a){},351:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(187),o=a.n(s),i=(a(211),a(29)),c=a(30),l=a(32),u=a(31),h=a(33),m=(a(212),a(213),a(119)),p=a.n(m),f=a(188),d=a(189),g={axis:{tickColor:"#eee",ticks:{text:{fontSize:"18px",fontFamily:"Lato, sans-serif",fontWeight:"bold"}},legend:{text:{fontSize:"20px",fontFamily:"Lato, sans-serif",fontWeight:"bold",fill:"#165f77"}}}},b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getAllBars=function(e){var t=a.props.data.length-e.length,n=a.props.data.slice(0,t),r=e[0],s=[];return n.reverse(),n.forEach((function(e){s.push({key:e.repoName,data:{id:"size",value:e.size,index:20,indexValue:e.repoName,data:{repoName:e.repoName,size:e.size}},x:0,y:r.y+64,width:1,height:58,color:"#e8c1a0"}),r=s[s.length-1]})),s.reverse(),s.concat(e)},a.formatSize=function(e){return e<512?"".concat(e," KiB"):e<1048576?"".concat(Math.round(100*(e/1024+Number.EPSILON))/100," MiB"):"".concat(Math.round(100*(e/1048576+Number.EPSILON))/100," GiB")},a.LabelText=function(e){var t=e.bars,n=a.getAllBars(t),s=n.map((function(e,t){e.key,e.x;var s=e.y,o=e.width,i=e.height;return r.a.createElement("text",{textAnchor:"middle",className:"foobarclass",x:o+50,y:s+i/2.1,style:{fontSize:"14px",fontFamily:"'Slabo 27px', serif"},key:t},a.formatSize(n[t].data.value))}));return r.a.createElement("g",null,s)},a.state={labelPosition:null},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:Math.max(700,70*this.props.repos.length)},className:"bar-chart"},r.a.createElement(d.a,{data:this.props.data,keys:["size"],indexBy:"repoName",margin:{top:50,right:300,bottom:300,left:300},padding:.1,layout:"horizontal",layers:["grid","axes","bars",this.LabelText,"markers","legends"],colors:{scheme:"nivo"},colorBy:"index",borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,enableLabel:!1,axisBottom:{tickSize:10,tickPadding:5,tickRotation:0,legend:"MiB",legendPosition:"middle",legendOffset:70,format:function(e){return Math.round(e/1024+Number.EPSILON)}},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15,theme:g,tooltipFormat:function(e){return e+" KiB"}}))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleUsernameChange=function(e){a.setState({username:e.target.value})},a.resetPageState=function(){a.responseData=[],a.fetchPage=1,a.fetchMore=!0,a.invalidUser=!1,a.unknownError=!1,a.success=!1},a.handleSubmit=function(e){a.setState({loading:!0,invalidUser:!1,sizeMessage:!1}),e.preventDefault(),a.fetchRepos().then((function(){0!==a.responseData.length?a.formatResponseData():a.setState({success:!1,sizeMessage:!1,invalidUser:a.invalidUser,unknownError:a.unknownError,noRepos:a.noRepos}),a.resetPageState(),a.setState({loading:!1})}))},a.formatResponseData=function(){var e=[],t=[],n=0;a.responseData.forEach((function(a){t.push(a.name),n+=a.size;var r=a.size;e.push({repoName:a.name,size:r})})),e.sort((function(e,t){return e.size-t.size})),a.setState({chartData:e,repos:t,success:!0,sizeMessage:!0,invalidUser:!1,unknownError:!1,noRepos:!1,totalSize:Math.round(100*(n/1048576+Number.EPSILON))/100})},a.state={username:"",renderChart:!0,responseData:[],chartData:null,repos:null,loading:!1,success:!1,sizeMessage:!1,fetchPage:1,fetchMore:!0,invalidUser:!1,noRepos:!1,unknownError:!1,totalSize:0},a.responseData=[],a.fetchPage=1,a.fetchMore=!0,a.invalidUser=!1,a.noRepos=!1,a.unknownError=!1,a.success=!1,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"fetchRepos",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetchMore){e.next=2;break}return e.abrupt("return");case 2:return t="https://api.github.com/users/".concat(this.state.username,"/repos?per_page=100"),a="".concat(t,"&page=").concat(this.fetchPage),e.next=6,fetch(a);case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,404!==n.status){e.next=13;break}return this.invalidUser=!0,e.abrupt("return");case 13:if(200===n.status){e.next=18;break}return this.unknownError=!0,this.loading=!1,this.success=!1,e.abrupt("return");case 18:if(0!==r.length){e.next=24;break}return this.fetchMore=!1,this.loading=!1,this.success=!1,0===this.responseData.length&&(this.noRepos=!0),e.abrupt("return");case 24:return this.responseData=this.responseData.concat(r),this.fetchPage=this.fetchPage+1,e.next=28,this.fetchRepos();case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"username-input-form"},r.a.createElement("input",{type:"text",className:"username-input",placeholder:"Github Username",value:this.state.username,onChange:this.handleUsernameChange})),this.state.loading?r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):null,this.state.invalidUser?r.a.createElement("div",{className:"alert alert-warning message",role:"alert"},"You sure that's a Github username?"):null,this.state.noRepos?r.a.createElement("div",{className:"alert alert-warning message",role:"alert"},"This person doesn't seems to have any repositories, what are you trying to see the space for?"):null,this.state.unknownError?r.a.createElement("div",{className:"alert alert-danger message",role:"alert"},"Something went wrong!"):null,this.state.sizeMessage?r.a.createElement("div",{className:"alert alert-info message"},"Total space occupied: ",this.state.totalSize," GiB"):null,this.state.success?r.a.createElement(b,{data:this.state.chartData,repos:this.state.repos}):null)}}]),t}(n.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Source code at ",r.a.createElement("a",{className:"footer-text",href:"http://github.com/aktech/"},"Github")," \u2022 Made with \ud83d\udda4 by ",r.a.createElement("a",{className:"footer-text",href:"http://github.com/aktech/"},"Amit")))}}]),t}(n.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"site-title"},"Gitspace"),r.a.createElement("h2",{className:"desc"},"Know the space occupied by your public repositories."),r.a.createElement(v,null),r.a.createElement(E,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[206,1,2]]]);
//# sourceMappingURL=main.f3972301.chunk.js.map